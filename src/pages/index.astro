---
import { getCollection } from "astro:content";
import Hero from "@/components/HomePageSection/HeroSection";
import Header from "@/components/Header";
import Footer from "@/components/Footer";
import About from "@/components/HomePageSection/About";
import MainLayout from "@/layouts/MainLayout.astro";
import Feature from "@/components/HomePageSection/Feature";
import TopProjects from "@/components/HomePageSection/TopProjects";
import FeaturedArticles from "@/components/HomePageSection/FeaturedArticles";
import FeaturedEvents from "@/components/HomePageSection/FeaturedEvents";
import CTA from "@/components/CTA";
import Feedback from "@/components/HomePageSection/Feedback";
import "@unocss/reset/tailwind.css";

const projects = await getCollection("projects");
const sortedProjects = projects.sort(
  (a, b) => b.data.totalLikes - a.data.totalLikes
);

const articles = await getCollection("articles");
const sortedArticles = articles.sort(
  (a, b) => b.data.totalLikes - a.data.totalLikes
);

const events = await getCollection("events");
const sortedEvents = events.sort(
  (a, b) => b.data.totalInterested - a.data.totalInterested
);
---

<MainLayout seo={{ title: "Home" }}>
  <Header client:only />
  <Hero client:only />
  <About client:only />
  <Feature client:only />
  <TopProjects projects={sortedProjects.slice(0, 5)} client:only />
  <FeaturedArticles client:only articles={sortedArticles.slice(0, 3)} />
  <FeaturedEvents client:only events={sortedEvents.slice(0, 5)} />
  <Feedback client:only />
  <CTA
    headline="Let’s innovate, collaborate, and transform the world together."
    withButton
    buttonProps={{
      labelButton: "Sign Up Now",
      colorButton:
        "bg-primary before:content-[''] before:w-full before:h-[10rem] before:absolute before:-top-15 before:-left-1 before:bg-[radial-gradient(30%_100%_at_50%_50%,_#05CD77_0%,_rgba(6,_205,_119,_0.00)_100%)] before:-rotate-55 hover:before:rotate-55 before:duration-300 hover:before:bg-[radial-gradient(40%_100%_at_50%_50%,_#05CD77_0%,_rgba(6,_205,_119,_0.00)_100%)]",
      borderButton: "rounded-md border border-secondary/20",
    }}
    description="Join Innovatech today and be part of a community that’s shaping the future of digital innovation."
    client:only
  />
  <Footer client:only />
</MainLayout>
