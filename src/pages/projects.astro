---
import MainLayout from "@/layouts/MainLayout.astro";
import Header from "@/components/Header";
import HeroDetail from "@/components/HeroDetail";
import ProjectTrending from "@/components/ProjectPageSection/ProjectTrending";
import ProjectBlogPost from "@/components/ProjectPageSection/ProjectBlogPost";
import Footer from "@/components/Footer";
import CTA from "@/components/CTA";
import { getCollection } from "astro:content";

const projects = await getCollection("projects");
const sortedProjects = projects.sort((a, b) => {
  const totalA = a.data.totalLikes + a.data.totalComments;
  const totalB = b.data.totalLikes + b.data.totalComments;
  return totalB - totalA;
});

const category = ["conference", "workshop", "seminar", "competition"];
const tags = [
  "Blockchain",
  "Supply Chain",
  "Open Source",
  "Cybersecurity",
  "IoT",
  "AI",
  "Healthcare",
  "Remote Work",
  "Collaboration",
  "VR",
  "Education",
];
---

<MainLayout seo={{ title: "Project" }}>
  <Header client:only />
  <HeroDetail
    title="Open Source Projects"
    description="Discover and contribute to innovative and impactful open source projects. Innovatech highlights leading open source initiatives that you can learn from, use, and help develop to collectively advance technology."
    inspire="Create project or Contribute"
    categories={category}
    client:only
  />
  <ProjectTrending projects={sortedProjects} client:only />
  <ProjectBlogPost projects={projects} category={category} client:only />
  <CTA
    headline="Be Part of the Innovation"
    description="Collaborate on leading open source projects and help advance technology. "
    client:only
  />
  <Footer client:only />
</MainLayout>
